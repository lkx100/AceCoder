{% extends "base.html" %}


{% block content %}

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Codechef ID</th>
            <th>Valid account</th>
            {% if details.contests %}
            <th>Contests Participated</th>
            <th>Problems Solved</th>
            <th>Plagarisms</th>
            <th>Stars</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{details.codechef_id}}</td>
            {% if details.all_contests %}
            <td>Valid account</td>
            <td>{{details.num_of_contests}}</td>
            <td>{{details.num_of_problems}}</td>
            <td>{{details.num_of_plagarisms}}</td>
            <td>{{details.stars}}</td>
            {% else %}
            <td>Invalid Account - Codechef Id doesn't exists</td>
            {% endif %}
        </tr>
    </tbody>
</table>


<form action="{% url "fetch_details" details.codechef_id%}" method="POST">
    {% csrf_token %}
    <label for="plagarised">Plagarised</label>
    <select name="plagarised" id="plagarised">
        <option value="All" {% if details.plag == 'All' %}selected{% endif %}>All</option>
        <option value="Yes" {% if details.plag == 'Yes' %}selected{% endif %}>Yes</option>
        <option value="No" {% if details.plag == 'No' %}selected{% endif %}>No</option>
    </select>
    <label for="sorting">SortBy</label>
    <select name="sorting" id="sorting">
        <option value="None" {% if details.sortby == 'None' %}selected{% endif %}>None</option>
        <option value="RatingInc" {% if details.sortby == 'RatingInc' %}selected{% endif %}>Rating (Low to High)</option>
        <option value="RatingDec" {% if details.sortby == 'RatingDec' %}selected{% endif %}>Rating (High to Low)</option>
        <option value="RankInc" {% if details.sortby == 'RankInc' %}selected{% endif %}>Rank (Low to High)</option>
        <option value="RankDec" {% if details.sortby == 'RankDec' %}selected{% endif %}>Rank (High to Low)</option>
    </select>
    <button type="submit">Filter</button>
</form>


{% if details.contests %}

<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Contest Code</th>
            <th>Rating</th>
            <th>Rank</th>
            <th>Plagarised</th>
        </tr>
    </thead>
    <tbody>
        {% for contest in details.contests %}
        <tr>
            <td>{{contest.name}}</td>
            <td>{{contest.rating}}</td>
            <td>{{contest.rank}}</td>
            {% if contest.penalised_in %}
            <td>YES</td>
            {% else %}
            <td>NO</td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

{% endblock %}